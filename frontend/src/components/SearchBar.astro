---
import { Search, X } from 'lucide-astro';
---

<div class="relative w-full max-w-xl mx-auto mb-12 z-50 isolate">
  <div class="relative">
    <div class="absolute left-4 top-1/2 -translate-y-1/2 text-[var(--color-text-tertiary)] pointer-events-none z-20">
      <Search size={20} />
    </div>
    <input
      type="text"
      id="search-input"
      placeholder="Search articles..."
      class="w-full pl-12 pr-12 py-4 rounded-full border border-[var(--color-border)] bg-white shadow-sm focus:ring-2 focus:ring-[var(--color-accent-primary)] focus:border-transparent outline-none transition-all relative z-10"
    />
    <button
      id="clear-search"
      class="absolute right-4 top-1/2 -translate-y-1/2 text-[var(--color-text-tertiary)] hover:text-[var(--color-text-primary)] hidden z-20 cursor-pointer"
      aria-label="Clear search"
    >
      <X size={20} />
    </button>
  </div>
  <div id="search-results-count" class="absolute -bottom-8 left-0 text-sm text-[var(--color-text-tertiary)] hidden">
    Showing <span id="count">0</span> articles
  </div>
</div>

<script>
  import { handleSearch } from '../lib/search';
  const searchInput = document.getElementById('search-input') as HTMLInputElement;
  if (searchInput) {
    handleSearch(searchInput);
  }
</script>
